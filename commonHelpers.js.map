{"version":3,"file":"commonHelpers.js","sources":["../src/img/yellow-shopping-basket.webp","../src/img/yellow-shopping-basket@2x.webp","../src/img/yellow-shopping-basket_mob.webp","../src/img/yellow-shopping-basket_mob@2x.webp","../src/img/yellow-shopping-basket.png","../src/js/actions-cart.js"],"sourcesContent":["export default \"__VITE_ASSET__acef3a4c__\"","export default \"__VITE_ASSET__c65dfa68__\"","export default \"__VITE_ASSET__f807e668__\"","export default \"__VITE_ASSET__c8d846f2__\"","export default \"__VITE_ASSET__de6e0cb5__\"","import localStorageAPI from \"./local-storage.js\";\nimport iconsPath from '../img/icons.svg';\nimport emptyCart from '../img/yellow-shopping-basket.webp';\nimport emptyCartRet from '../img/yellow-shopping-basket@2x.webp';\nimport emptyCartMob from '../img/yellow-shopping-basket_mob.webp';\nimport emptyCartMobRet from '../img/yellow-shopping-basket_mob@2x.webp';\nimport emptyCartBase from '../img/yellow-shopping-basket.png';\n\nimport { getLength } from \"./header.js\";\nimport { order } from \"./api.js\";\n\nexport function addNumberProd() {\n  const arrFromLS = localStorageAPI.load('product');\n  document.querySelector('.cart-number-purchases').innerHTML = `${\n    arrFromLS ? arrFromLS.length : '0'\n  } `;\n}\naddNumberProd();\n\n\nconst cartProducts = localStorageAPI.load('product');\ndocument.addEventListener('DOMContentLoaded', event => {\n  if (cartProducts.length === 0) {\n    document.querySelector('.section-cart').innerHTML = renderCartEmpty();\n  }\n  addScroll();\n});\n\nfunction renderCarts(cartProducts) {\n  if (cartProducts) {\n    const cartItemsHTML = cartProducts\n      .map(product => renderCartProduct(product))\n      .join('');\n    document.querySelector('.cart-shopping-list').innerHTML = cartItemsHTML;\n  } else {\n    document.querySelector('.section-cart').innerHTML = renderCartEmpty();\n  }\n}\nrenderCarts(cartProducts);\n\ndocument.querySelector('.delete-all-box').addEventListener('click', () => {\n  //   localStorage.clear();\n  localStorageAPI.remove('product');\n  getLength();\n  document.querySelector('.section-cart').innerHTML = renderCartEmpty();\n});\n\nconst productList = document.querySelector('.cart-shopping-list ');\nproductList.addEventListener('click', onDeleteItemClick);\n\nfunction onDeleteItemClick(event) {\n  if (!event.target.closest('.cart-delete-icon')) {\n    return;\n  }\n  localStorage.setItem('product', JSON.stringify());\n  const cardEl = event.target.closest('li');\n\n  const id = cardEl.dataset.productId;\n\n  const index = cartProducts.findIndex(object => object.id === id);\n  if (index !== -1) {\n    cartProducts.splice(index, 1);\n  }\n  localStorage.setItem('product', JSON.stringify(cartProducts));\n  renderCarts(cartProducts);\n  calculatePrice();\n  addScroll();\n  addNumberProd();\n  getLength();\n  if (cartProducts.length === 0) {\n    document.querySelector('.section-cart').innerHTML = renderCartEmpty();\n  }\n}\n\nfunction renderCartProduct(product) {\n  let { id, name, img, category, size, price } = product;\n  return `\n      <li class=\"cart-shopping-item\" data-product-id=${id}>\n      <img\n        class=\"cart-shopping-img\"\n        src=\"${img}\"\n        alt=\"${name}\"\n      />\n      <div class=\"cart-item-info\">\n        <div class=\"cart-info-top\">\n          <p class=\"cart-info-name-product\">${name}</p>\n          <svg class=\"cart-delete-icon\">\n              <use href=\"${iconsPath}#icon-close\"></use>\n          </svg>\n        </div>\n  \n        <ul class=\"cart-properties-list\">\n          <li class=\"cart-properties-item\">\n            <h3 class=\"cart-properties-caption\">Category:</h3>\n            <p class=\"cart-properties-subtitle\">${category}</p>\n          </li>\n          <li class=\"cart-properties-item\">\n            <h3 class=\"cart-properties-caption\">Size:</h3>\n            <p class=\"cart-properties-subtitle\">${size}</p>\n          </li>\n        </ul>\n  \n        <div class=\"cart-info-bottom\">\n         <p class=\"cart-info-price\">&#36;<span class=\"js-cart-info-price\">${price}</span></p>\n  \n          <div class=\"cart-counter-wrapper\">\n            <button class=\"cart-counter-decrement\" type=\"button\" data-action=\"minus\">-</button>\n            <span class=\"cart-counter-value\" data-counter>1</span>\n            <button class=\"cart-counter-increment\" type=\"button\" data-action=\"plus\">+</button>\n          </div>\n        </div>\n      </div>\n    </li>\n      `;\n}\n\nfunction renderCartEmpty() {\n  return `\n  <div class=\"cart-empty\">\n  <picture class=\"cart-empty-retina\">\n        <source\n          media=\"(min-width: 1440px)\"\n          srcset=\"\n            ${emptyCart} 1x,\n            ${emptyCartRet} 2x\n          \"\n        />\n        <source\n          media=\"(min-width: 768px)\"\n          srcset=\"\n          ${emptyCart} 1x,\n          ${emptyCartRet} 2x\n          \"\n        />\n        <source\n          media=\"(min-width: 320px)\"\n          srcset=\"\n          ${emptyCartMob} 1x,\n          ${emptyCartMobRet} 2x\n          \"\n        />\n  <img\n    class=\"cart-empty-img\"\n    src=\"${emptyCartBase}\"\n    alt=\"Empty cart\"\n  />\n  <p class=\"cart-empty-text\">\n    Your basket is <a href=\"#\" class=\"cart-empty-link\">empty...</a>\n  </p>\n  <p class=\"cart-empty-description\">\n    Go to the main page to select your favorite products and add them to the\n    cart.\n  </p>\n</div>\n      `;\n}\n\nfunction calculatePrice() {\n  const cartItems = document.querySelectorAll('.cart-shopping-item');\n  const spanTotalPrice = document.querySelector('.js-total-price');\n  let totalPrice = 0;\n\n  cartItems.forEach(item => {\n\n    const amountEl = item.querySelector('[data-counter]');\n    const priceEl = item.querySelector('.js-cart-info-price');\n\n    const currentPrice = Number(amountEl.innerHTML) * Number(priceEl.innerHTML);\n    totalPrice += currentPrice;\n  });\n  spanTotalPrice.innerHTML = totalPrice.toFixed(2);\n}\ncalculatePrice();\n\nwindow.addEventListener('click', event => {\n  let counter;\n  if (\n    event.target.dataset.action === 'plus' ||\n    event.target.dataset.action === 'minus'\n  ) {\n    const counterWrapper = event.target.closest('.cart-counter-wrapper');\n    counter = counterWrapper.querySelector('[data-counter]');\n  }\n\n  if (event.target.dataset.action === 'plus') {\n    counter.innerHTML = ++counter.innerHTML;\n    calculatePrice();\n  }\n\n  if (event.target.dataset.action === 'minus') {\n    if (parseInt(counter.innerHTML) > 1)\n      counter.innerHTML = --counter.innerHTML;\n    calculatePrice();\n  }\n});\n\nfunction addScroll() {\n  const productsCount = productList.querySelectorAll(\n    '.cart-shopping-item'\n  ).length;\n\n  if (productsCount > 3) {\n    productList.style.overflowY = 'scroll';\n  } else {\n    productList.style.overflowY = 'hidden';\n  }\n}\n\nconst orderFormModal = document.querySelector('.cart-form');\norderFormModal.addEventListener('submit', openModalOrder);\n\nfunction openModalOrder(event) {\n  event.preventDefault();\n  let buyProduct = localStorageAPI.load('product');\n\n  document.body.insertAdjacentHTML('afterbegin', createMarkupOrderModal(buyProduct));\n}\n\nfunction createMarkupOrderModal(product) {\n  return `\n  <div class=\"order-backdrop\">\n  <div class=\"order-modal\">\n      <svg class=\"order-close-icon\">\n        <use href=\"${iconsPath}#icon-close\"></use>\n      </svg>\n      <img class=\"order-image\" src=\"${product[0].img}\" alt=\"order-image\" id=\"${product[0].id}\">\n      <h2 class=\"order-title\">Order success</h2>\n      <p class=\"order-text\">Thank you for shopping at Food Boutique. Your order has been received and is now being freshly prepared just for you! Get ready to indulge in nourishing goodness, delivered right to your doorstep. We're thrilled to be part of your journey to better health and happiness.</p>\n  </div>\n  </div>\n  `;\n}\n\ndocument.body.addEventListener('click', closeOrderModal);\n\nfunction closeOrderModal(event) {\n  const orderBackdrop = document.querySelector('.order-backdrop');\n  if (event.target.closest(\".order-close-icon\") || event.target.classList.contains(\"order-backdrop\")) {\n    orderBackdrop.classList.add('is-hidden');\n\n    document.querySelector('.section-cart').innerHTML = renderCartEmpty();\n    localStorageAPI.remove('product');\n    getLength();\n  }\n}\n"],"names":["emptyCart","emptyCartRet","emptyCartMob","emptyCartMobRet","emptyCartBase","addNumberProd","arrFromLS","localStorageAPI","cartProducts","event","renderCartEmpty","addScroll","renderCarts","cartItemsHTML","product","renderCartProduct","getLength","productList","onDeleteItemClick","id","index","object","calculatePrice","name","img","category","size","price","iconsPath","cartItems","spanTotalPrice","totalPrice","item","amountEl","priceEl","currentPrice","counter","orderFormModal","openModalOrder","buyProduct","createMarkupOrderModal","closeOrderModal","orderBackdrop"],"mappings":"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"}