{"version":3,"file":"commonHelpers2.js","sources":["../src/js/api.js","../src/js/actions-cards.js","../src/js/main-page.js","../src/js/popular-discount.js"],"sourcesContent":["import axios from 'axios';\nimport {getFilter} from './filters.js';\nconst BASE_URL = 'https://food-boutique.b.goit.study/api/products';\n\nexport async function getCategories() {\n  const response = await axios.get(`https://food-boutique.b.goit.study/api/products/categories`);\n  return response.data;\n}\n\nexport const fetchPopularProducts = () => {\n  const params = {\n    limit: 5,\n  };\n  return axios(`${BASE_URL}/popular`, { params });\n};\n\nexport const fetchDiscountProducts = () => {\n  return axios(`${BASE_URL}/discount`);\n};\n\n//**Products list */\nexport const apiUrl = 'https://food-boutique.b.goit.study/api/products';\n\nexport async function fetchProductsFromApi(page, limit) {\n  try {\n    const response = await axios.get(apiUrl, {\n      params: {\n        byABC: true,\n        byPrice: true,\n        byPopularity: true,\n        page,\n        limit,\n      },\n    });\n\n    const { results, page: currentPage, totalPages } = response.data;\n\n    if (Array.isArray(results)) {\n      return { products: results, currentPage, totalPages };\n    } else {\n      console.error(\n        'Received data does not contain an array of products:',\n        response.data\n      );\n      return null;\n    }\n  } catch (error) {\n    console.error('Error fetching products:', error);\n    return null;\n  }\n}\n//**Products list END */\n","import Swal from 'sweetalert2';\n\n// Функція, яка викликається при додаванні продукту до кошика\nexport async function addToCart(productId) {\n  // Знаходимо кнопку, яка відповідає за додавання продукту\n  const button = document.querySelector(\n    `.cart-button[data-product-id=\"${productId}\"]`\n  );\n\n  // Перевіряємо, чи кнопка існує та чи її клас не містить \"added\"\n  if (button && !button.classList.contains('added')) {\n    // Додаємо клас \"added\" до кнопки\n    button.classList.add('added');\n\n    // Змінюємо вміст кнопки, додаючи піктограму галочки\n    button.innerHTML = `\n      <span class=\"icon-container\">\n        <svg class=\"check-icon\" \n          width=\"18\" height=\"18\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" fill=\"none\">\n          <path d=\"M15 4.5L6.75 12.75L3 9\" stroke=\"#E8E8E2\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n        </svg>\n      </span>\n    `;\n\n    // Функція для відображення сповіщення\n    function showNotification(message) {\n      // Викликаємо метод Swal.fire() з параметрами сповіщення\n\n      Swal.fire({\n        text: message,\n        icon: 'success',\n        timer: 2000,\n        showConfirmButton: false, // Приховати кнопку OK\n        customClass: {\n          container: 'custom-swal2-container',\n        },\n      });\n    }\n    // Викликаємо функцію для відображення сповіщення\n    showNotification('Product added to the cart');\n  }\n}\n\n// Функція для перевірки наявності товару в кошику та використання localStorage\nexport async function checkIfInCart(productId) {\n  try {\n    // Отримуємо дані з localStorage\n    const cartData = JSON.parse(localStorage.getItem('cart')) || [];\n\n    // Перевіряємо, чи є товар в кошику\n    const isInCart = cartData.some(item => item.productId === productId);\n\n    return isInCart;\n  } catch (error) {\n    console.error('Error checking if product is in cart:', error);\n    return false;\n  }\n}\n","import { addToCart, checkIfInCart } from './actions-cards';\n\nimport { fetchProductsFromApi, apiUrl } from './api';\n\ndocument.addEventListener('DOMContentLoaded', async () => {\n  const productListElement = document.getElementById('productList');\n\n  if (!productListElement) {\n    console.error(\"Element with id 'productList' not found.\");\n    return;\n  }\n\n  const defaultPage = 1;\n  const defaultLimit = 9;\n\n  async function fetchProducts(page = defaultPage, limit = defaultLimit) {\n    try {\n      const { products, currentPage, totalPages } = await fetchProductsFromApi(\n        page,\n        limit\n      );\n\n      if (products) {\n        await renderProductList(products);\n        updatePagination(currentPage, totalPages);\n      }\n    } catch (error) {\n      console.error('Error fetching products:', error);\n    }\n  }\n\n  // Функція для створення розмітки HTML\n  function createProductCard(product) {\n    // Визначаємо текст кнопки \"Add to Cart\" або порожній рядок в залежності від наявності продукту в корзині\n    const cartButtonText = checkIfInCart(product._id) ? '' : 'Add to Cart';\n\n    // Створюємо рядок HTML для карточки продукту\n    return `\n    <li class=\"product-card\">\n      <div class=\"ooverlay\">\n          <img width=\"140px\" height=\"140px\" class=\"product-image\" ${\n            product.img ? `src=\"${product.img}\"` : 'src=\"./default-image.jpg\"'\n          } alt=\"${product.name}\">\n      </div>\n      <h3 class=\"product-name\">${product.name}</h3>\n      <p class=\"product-category\">\n        <span class=\"label-category\">Category:</span> ${product.category} \n      </p>\n      <p class=\"product-size\">\n        <span class=\"label-size\">Size:</span> ${product.size}\n      </p>\n      <p class=\"product-popularity\">\n        <span class=\"label-popularity\">Popularity:</span> ${product.popularity}\n      </p>\n      <p class=\"product-price\">$${product.price.toFixed(2)}</p>\n      <button class=\"cart-button\" data-product-id=\"${\n        product._id\n      }\">${cartButtonText}</button>\n    </li>`;\n  }\n\n  // Все все що вище вже запущено////\n\n  // Функція для відображення списку продуктів\n  async function renderProductList(products) {\n    // Очищаємо вміст елементу з id=\"productList\"\n    productListElement.innerHTML = '';\n\n    // Проходимося по кожному продукту в отриманому масиві\n    for (const product of products) {\n      // Створюємо HTML-представлення карточки продукту\n      const productCard = createProductCard(product);\n\n      // Додаємо HTML-представлення продукту в кінець списку продуктів\n      productListElement.insertAdjacentHTML('beforeend', productCard);\n    }\n  }\n\n  /////////////////\n\n  productListElement.addEventListener('click', async event => {\n    // Перевіряємо, чи клікнуто по елементу з класом \"cart-button\"\n    if (event.target.classList.contains('cart-button')) {\n      // Отримуємо ідентифікатор товару з атрибуту \"data-product-id\"\n      const productId = event.target.dataset.productId;\n      // Викликаємо функцію для додавання товару в кошик та очікуємо завершення операції\n      await addToCart(productId);\n    }\n  });\n\n  // Виклик функції для отримання першої сторінки товарів\n  fetchProducts();\n});\n","import { fetchDiscountProducts, fetchPopularProducts } from './api';\n\nconst refs = {\n  popular: document.querySelector('.popular_list'),\n  discount: document.querySelector('.discount_list'),\n};\n\ndocument.addEventListener('DOMContentLoaded', fetchPopular);\ndocument.addEventListener('DOMContentLoaded', fetchDiscount);\n\nasync function fetchPopular() {\n  try {\n    const { data } = await fetchPopularProducts();\n    refs.popular.insertAdjacentHTML('beforeend', createPopularList(data));\n\n    console.log(data);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction createPopularList(array) {\n  return array\n    .map(\n      card => ` <li class=\"card_item\">\n      <div class=\"card_img\">\n        <img\n          src=${card.img}\n          width=\"56\"\n          height=\"56\"\n          alt=${card.name}\n        />\n      </div>\n      <div class=\"card_elements\">\n        <h3 class=\"card_title\">${card.name}</h3>\n        <p class=\"card_text card_text--margin_b\">\n          <span class=\"card_el\">Category:</span>&nbsp;<span>${card.category}</span>\n        </p>\n        <p class=\"card_text\">\n          <span class=\"card_el\">Size:</span>&nbsp;<span>${card.size}</span\n          ><span class=\"card_el card_el--margin_l\">Popularity:</span>&nbsp;<span\n            >${card.popularity}</span\n          >\n        </p>\n      </div>\n      <button type=\"button\" class=\"card_btn\">\n        <svg class=\"order_btn\" width=\"12\" height=\"12\">\n          <use href=\"../img/icons.svg#shopping-cart\"></use>\n        </svg>\n      </button>\n    </li>`\n    )\n    .join('');\n}\n\nasync function fetchDiscount() {\n  try {\n    const { data } = await fetchDiscountProducts();\n    refs.discount.insertAdjacentHTML(\n      'beforeend',\n      createDiscountList(data.slice(0, 2))\n    );\n    console.log(data);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction createDiscountList(array) {\n  return array\n    .map(\n      card => `\n    <li class=\"discount_card_item\">\n      <div class=\"discount_card_img\">\n        <img\n          src=${card.img}\n          width=\"114\"\n          height=\"114\"\n          alt=${card.name}\n        />\n        </div>\n        <div class=\"svg_box\">\n          <svg width=\"60\" height=\"60\">\n            <use href=\"../img/icons.svg#discount\">\n            </use>\n          </svg>\n        </div>\n\n      <div class=\"discount_card_elements\">\n        <h3 class=\"card_title--discount card_title\">${card.name}</h3>\n        <span class=\"card_title--price card_title \">${card.price}</span>\n\n        <button type=\"button\" class=\"discount_card_btn\">\n          <svg  width=\"18\" height=\"18\">\n          <use href=\"../img/icons.svg#shopping-cart\"></use>\n          </svg>\n        </button>\n          \n      </div>  \n    </li> `\n    )\n    .join('');\n}\n"],"names":["BASE_URL","fetchPopularProducts","params","axios","fetchDiscountProducts","apiUrl","fetchProductsFromApi","page","limit","response","results","currentPage","totalPages","error","addToCart","productId","button","showNotification","message","Swal","checkIfInCart","item","productListElement","defaultPage","defaultLimit","fetchProducts","products","renderProductList","createProductCard","product","cartButtonText","productCard","event","refs","fetchPopular","fetchDiscount","data","createPopularList","array","card","createDiscountList"],"mappings":"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"}